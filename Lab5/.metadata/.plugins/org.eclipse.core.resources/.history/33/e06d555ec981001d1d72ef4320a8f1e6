/*
 * uart_fsm.c
 *
 *  Created on: Dec 12, 2022
 *      Author: ADMIN
 */
#include "uart_fsm.h"
#include "main.h"


void command_parser_fsm(){

}
void uart_communiation_fsm(){
	ADC_value= HAL_ADC_GetValue(&hadc1);
//	HAL_UART_Transmit(&huart2, (void *)str, sprintf(str,"%d\r\n",ADC_value), 1000);
	  if(timer1_flag == 1){
		  switch(status){
			  case 1:
				  if(buffer[5]==13){
					  HAL_UART_Transmit(&huart2, (void *)str, sprintf(str,"%ld\r\n",ADC_value), 20);
					  HAL_UART_Transmit(&huart2, buffer, 3, 1000);
					  resetbuffer();
				  }
				  break;
			  case 2:
				  HAL_UART_Transmit(&huart2, buffer, 3, 1000);
				  if(buffer[4]==13) resetbuffer();
				  break;
		  }
		  setTimer1(500);
	  }
}


